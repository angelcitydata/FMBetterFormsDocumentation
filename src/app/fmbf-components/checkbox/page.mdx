export const metadata = {
  title: 'Checkbox Component',
  description:
    'An interactive checkbox component for FM BetterForms that allows users to select or deselect options with support for indeterminate state, labels, descriptions, and keyboard accessibility.',
}

# Checkbox Component

The Checkbox component provides an interactive form control for binary choices in your FM BetterForms application. It features a clean, accessible design with support for checked, unchecked, and indeterminate states, making it perfect for forms, settings, and user preferences. {{ className: 'lead' }}

    This component supports binary state management with customizable labels and descriptions,
    indeterminate state handling, keyboard navigation, and comprehensive accessibility features
    for optimal user experience.

---

## Component Properties

### Core Properties

<Properties>
  <Property name="modelKey" type="string">
    The key used to bind the checkbox value to the form model. This property
    determines which field in the model will store the checkbox state.
    Example: `"agreeToTerms"`, `"newsletterSubscription"`.
    Default is `"comboValue"`.
  </Property>
  <Property name="label" type="string">
    The text label displayed next to the checkbox. This text appears in bold
    and serves as the clickable label for the checkbox.
    Example: `"I agree to the terms and conditions"`, `"Subscribe to newsletter"`.
    Default is `"Checkbox"`.
  </Property>
  <Property name="description" type="string">
    Optional descriptive text displayed below the label. This text appears in
    smaller font size with muted foreground color to provide additional context.
    Example: `"You can unsubscribe at any time"`, `"Required to proceed"`.
    Default is empty string (not displayed).
  </Property>
  <Property name="disabled" type="boolean|string">
    Controls whether the checkbox is disabled. Can be boolean or string values
    that evaluate to disabled state. When disabled, the checkbox cannot be
    interacted with and appears with reduced opacity.
    Example: `true`, `"true"`, `"1"`, `"on"`, `"yes"`.
    Default is `false`.
  </Property>
  <Property name="indeterminate" type="boolean">
    Sets the checkbox to an indeterminate state, typically used when a parent
    checkbox controls multiple child checkboxes with mixed states.
    Example: `true` (shows minus icon), `false` (normal state).
    Default is `false`.
  </Property>
  <Property name="items" type="array">
    Array of items for checkbox list functionality. Each item can contain
    properties for displaying structured checkbox options. Currently supports
    empty array for future expansion of checkbox list features.
    We are evaluating planned support for multiple items per checkbox to support
    a single field with an array of values.
    Example: `[]` (empty array for now, future expansion planned).
    Default is empty array.
  </Property>
</Properties>

### Action Properties

<Properties>
  <Property name="namedAction" type="string">
    Optional action to trigger when the checkbox state changes. This allows
    for custom behavior when the checkbox is toggled.
    Example: `"validateForm"`, `"updateParentState"`.
    Default is empty string.
  </Property>
  <Property name="actionOptions" type="object">
    Configuration options passed to the named action when triggered.
    This object can contain any data needed for the action execution.
    Example: `{"validate": true, "field": "email"}`.
    Default is empty object `{}`.
  </Property>
</Properties>

### Technical Properties

<Properties>
  <Property name="windowIndex" type="number">
    The index of the window containing this checkbox component. Used for
    accessing the correct form model in multi-window applications.
    Example: `0`, `1`, `2`.
    Default is `0`.
  </Property>
  <Property name="id" type="string">
    Optional unique identifier for the checkbox element. If not provided,
    will be generated from modelKey or windowIndex.
    Example: `"terms-checkbox"`, `"newsletter-opt-in"`.
    Default is auto-generated.
  </Property>
</Properties>

---

## Checkbox States and Behavior

The Checkbox component supports three distinct states and provides comprehensive interaction handling for optimal user experience.

### State Types

The checkbox can exist in three states:

1. **Unchecked** - Default state, shows empty checkbox with border
2. **Checked** - Selected state, shows filled checkbox with checkmark icon
3. **Indeterminate** - Mixed state, shows filled checkbox with minus icon

### Interaction Behavior

- **Click/Tap**: Toggles between checked and unchecked states
- **Keyboard**: Space or Enter keys toggle the state
- **Label Click**: Clicking the label text also toggles the checkbox
- **Disabled State**: When disabled, no interactions are possible

### State Transitions

- **Unchecked → Checked**: User clicks or presses space/enter
- **Checked → Unchecked**: User clicks or presses space/enter again
- **Indeterminate → Checked**: User clicks (indeterminate becomes checked)
- **Any State → Disabled**: Controlled by the `disabled` property

### Data Binding and Model Integration

The checkbox component binds its state to the form model using the `modelKey` property. When the checkbox state changes, the corresponding model field is automatically updated.

**Model Integration:**
- The `modelKey` property specifies which field in the model stores the checkbox state
- Checkbox state is stored as a boolean value (`true` for checked, `false` for unchecked)
- The model is automatically updated when the user interacts with the checkbox
- The `items` array is reserved for future checkbox list functionality

**Data Flow:**
1. User interacts with checkbox (click, keyboard)
2. Component toggles its visual state
3. Model field (specified by `modelKey`) is updated with boolean value
4. Any configured actions are triggered via `namedAction`

**Example Model Structure:**
```javascript
// Model with checkbox fields
model = {
  agreeToTerms: false,           // Basic checkbox
  newsletterSubscription: false, // Checkbox with description
  adminOnly: false,              // Disabled checkbox
  selectAll: false,              // Indeterminate checkbox
  autoSave: false,               // Checkbox with action
  premiumFeatures: false         // Complete checkbox
}
```

---

## Usage Examples

The Checkbox component is configured using JSON objects with properties for form interaction. Here are common usage patterns for different scenarios.

### Basic Checkbox

<CodeGroup>
```html title="HTML Component"
<bfcomp name="Checkbox" 
        modelKey="agreeToTerms"
        label="I agree to the terms and conditions">
</bfcomp>
```

```javascript title="Model Definition"
// Define basic checkbox in your model
model.agreeToTerms = false
```

```json title="JSON Configuration"
{
  "modelKey": "agreeToTerms",
  "label": "I agree to the terms and conditions",
  "disabled": false,
  "indeterminate": false,
  "items": []
}
```

</CodeGroup>

### Checkbox with Description

<CodeGroup>
```html title="HTML Component"
<bfcomp name="Checkbox" 
        modelKey="newsletterSubscription"
        label="Subscribe to newsletter"
        description="You can unsubscribe at any time">
</bfcomp>
```

```javascript title="Model Definition"
// Define checkbox with description in your model
model.newsletterSubscription = false
```

```json title="JSON Configuration"
{
  "modelKey": "newsletterSubscription",
  "label": "Subscribe to newsletter",
  "description": "You can unsubscribe at any time",
  "disabled": false,
  "indeterminate": false,
  "items": []
}
```

</CodeGroup>

### Disabled Checkbox

<CodeGroup>
```html title="HTML Component"
<bfcomp name="Checkbox" 
        modelKey="adminOnly"
        label="Administrator access"
        description="Contact admin to enable"
        disabled="true">
</bfcomp>
```

```javascript title="Model Definition"
// Define disabled checkbox in your model
model.adminOnly = false
```

```json title="JSON Configuration"
{
  "modelKey": "adminOnly",
  "label": "Administrator access",
  "description": "Contact admin to enable",
  "disabled": true,
  "indeterminate": false,
  "items": []
}
```

</CodeGroup>

### Indeterminate Checkbox

<CodeGroup>
```html title="HTML Component"
<bfcomp name="Checkbox" 
        modelKey="selectAll"
        label="Select all items"
        indeterminate="true">
</bfcomp>
```

```javascript title="Model Definition"
// Define indeterminate checkbox in your model
model.selectAll = false
```

```json title="JSON Configuration"
{
  "modelKey": "selectAll",
  "label": "Select all items",
  "disabled": false,
  "indeterminate": true,
  "items": []
}
```

</CodeGroup>

### Checkbox with Action

<CodeGroup>
```html title="HTML Component"
<bfcomp name="Checkbox" 
        modelKey="autoSave"
        label="Enable auto-save"
        description="Automatically save changes every 5 minutes"
        namedAction="toggleAutoSave"
        actionOptions='{"interval": 300000}'>
</bfcomp>
```

```javascript title="Model Definition"
// Define checkbox with action in your model
model.autoSave = false
```

```json title="JSON Configuration"
{
  "modelKey": "autoSave",
  "label": "Enable auto-save",
  "description": "Automatically save changes every 5 minutes",
  "namedAction": "toggleAutoSave",
  "actionOptions": {"interval": 300000},
  "disabled": false,
  "indeterminate": false,
  "items": []
}
```

</CodeGroup>

### Complete Checkbox Example

<CodeGroup>
```html title="HTML Component"
<bfcomp name="Checkbox" 
        modelKey="premiumFeatures"
        label="Enable premium features"
        description="Unlock advanced functionality with premium subscription"
        id="premium-toggle"
        windowIndex="0"
        namedAction="updateFeatureSet"
        actionOptions='{"tier": "premium"}'>
</bfcomp>
```

```javascript title="Model Definition"
// Define complete checkbox in your model
model.premiumFeatures = false
```

```json title="JSON Configuration"
{
  "modelKey": "premiumFeatures",
  "label": "Enable premium features",
  "description": "Unlock advanced functionality with premium subscription",
  "id": "premium-toggle",
  "windowIndex": 0,
  "namedAction": "updateFeatureSet",
  "actionOptions": {"tier": "premium"},
  "disabled": false,
  "indeterminate": false,
  "items": []
}
```

</CodeGroup>

---

## Component Schema

The complete component schema for the Checkbox component. Copy and paste this code into the Component Schema section of your BetterForms app.

### Complete Schema

<CodeGroup>
```json title="Component Schema"
{
    "actionOptions": {},
    "disabled": false,
    "emptyText": "No results found.",
    "html": "<!-- Wrapper -->\n<div class=\"flex items-start gap-3 select-none my-4\">\n  <!-- Clickable control -->\n  <button\n    type=\"button\"\n    :id=\"schema.id || schema.modelKey || 'cb-'+schema.windowIndex\"\n    role=\"checkbox\"\n    :aria-checked=\"schema.indeterminate ? 'mixed' : (Boolean((vueapp.$store.state.wndw.windows[schema.windowIndex].formSchema.model || {})[schema.modelKey]) ? 'true' : 'false')\"\n    :disabled=\"(schema.isDisabled===true)||['true','1','on','yes'].includes(String(schema.isDisabled||schema.disabled||'').toLowerCase())\"\n    @click=\"(function(){\n      const DIS = (schema.isDisabled===true)||['true','1','on','yes'].includes(String(schema.isDisabled||schema.disabled||'').toLowerCase());\n      if (DIS) return;\n      const win   = vueapp.$store.state.wndw.windows[schema.windowIndex];\n      const model = win.formSchema.model;\n      const k     = schema.modelKey || 'checkboxValue';\n      if (schema.indeterminate === true) { model[k] = true; } else { model[k] = !Boolean(model[k]); }\n      if (schema.namedAction) namedAction(schema.namedAction, schema.actionOptions || {});\n    })()\"\n    @keydown.enter.prevent=\"$el.click()\"\n    @keydown.space.prevent=\"$el.click()\"\n    class=\"relative inline-flex h-5 w-5 items-center justify-center rounded\n           outline-none transition-colors\n           focus:ring-2 focus:ring-ring\n           disabled:opacity-50 disabled:cursor-not-allowed\"\n    :class=\"\n      (schema.indeterminate || Boolean((vueapp.$store.state.wndw.windows[schema.windowIndex].formSchema.model || {})[schema.modelKey]))\n        ? 'bg-primary border border-primary'\n        : 'bg-card border border-input'\n    \"\n  >\n    <!-- Icon overlay -->\n    <span\n      class=\"pointer-events-none absolute inset-0 flex items-center justify-center rounded text-white transition-opacity\"\n      :class=\"(schema.indeterminate || Boolean((vueapp.$store.state.wndw.windows[schema.windowIndex].formSchema.model || {})[schema.modelKey])) ? 'opacity-100' : 'opacity-0'\">\n      <i v-if=\"schema.indeterminate\" class=\"fa-solid fa-minus text-[10px]\"></i>\n      <i v-else class=\"fa-solid fa-check text-[10px]\"></i>\n    </span>\n  </button>\n\n  <!-- Label + description (label remains clickable for good UX) -->\n  <div class=\"flex flex-col gap-1 mt-[2px]\">\n    <button\n      type=\"button\"\n      class=\"text-left cursor-pointer block text-sm font-semibold text-foreground disabled:cursor-not-allowed disabled:opacity-50\"\n      :disabled=\"(schema.isDisabled===true)||['true','1','on','yes'].includes(String(schema.isDisabled||schema.disabled||'').toLowerCase())\"\n      @click=\"(function(){ const t=document.getElementById(schema.id || schema.modelKey || 'cb-'+schema.windowIndex); if(t) t.click(); })()\"\n    >\n      {{ schema.label || 'Checkbox' }}\n    </button>\n    <span v-if=\"schema.description\" class=\"block text-xs text-muted-foreground\">\n      {{ schema.description }}\n    </span>\n  </div>\n</div>",
    "items": [],
    "modelKey": "comboValue",
    "namedAction": "",
    "placeholder": "Select an option…",
    "windowIndex": 0
}
```
</CodeGroup>

### How to Add This Component to Your BetterForms App

1. **Navigate to Components**: In your BetterForms site environment, click the **Components** tab in the left sidebar.

2. **Create New Component**: If the Checkbox component is not already in your components list, click the **+New** button at the top left.

3. **Open Component Schema**: In the new component, click the **`</> Component Schema`** button to access the schema editor.

4. **Replace Schema Code**: Copy the complete schema from the **Component Schema** tab above and replace all the existing code in the Component Schema section.


5. **Save Component**: Click the **Save** button in the top right to save the component for use in your application.

6. **Refresh Pages**: **Important**: The component will not be available for use in any live pages you are currently viewing until you manually refresh the page using your browser's Refresh button. However, the component will be immediately available in the **Page Builder** section of every page after you save and navigate away from the Components section.


