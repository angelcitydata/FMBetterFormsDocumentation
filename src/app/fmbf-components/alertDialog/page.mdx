export const metadata = {
  title: 'Alert Dialog Component',
  description:
    'A modal dialog component for FM BetterForms that displays important messages, confirmations, and alerts with customizable action buttons.',
}

# Alert Dialog Component

The Alert Dialog component provides a focused way to display critical information, confirmations, and alerts in your FM BetterForms application. It features customizable title and body content, flexible action buttons with loading states, and full accessibility support for creating intuitive user interactions. {{ className: 'lead' }}

    This component supports multiple action buttons with different variants,
    handles loading states for async operations, and provides a clean, focused
    interface for user decisions and important notifications.

---

## Component Properties

### Content Properties

<Properties>
  <Property name="title" type="string">
    The heading text displayed at the top of the alert dialog. This should
    clearly and concisely describe the purpose of the dialog. Example: `"Delete
    Record?"`, `"Confirm Action"`, `"Warning"`
  </Property>
  <Property name="body" type="string">
    The main content/message displayed in the alert dialog. This provides
    additional context, details, or instructions for the user. Example: `"Are
    you sure you want to delete this record? This action cannot be undone."`
  </Property>
  <Property name="actionButtons" type="array">
    An array of button objects that define the actions available in the dialog.
    Each button object supports the following properties:

    - **`label`** (string) - The text displayed on the button (default: "Button")
    - **`variant`** (string) - The button style variant (see Button Variants Guide below)
    - **`icon`** (string) - Font Awesome icon class (e.g., "fa-check", "fa-trash")
    - **`namedAction`** (string) - The named action to trigger when clicked
    - **`actionOptions`** (object) - Additional options/parameters for the named action
    - **`loadingKey`** (string) - Model key to check for loading state
    - **`width`** (string) - Button width: "full" for full width, otherwise fits content

    Buttons are displayed in reverse column order on mobile, and in a row
    (right-aligned) on desktop. Default is an empty array `[]`.

  </Property>
</Properties>

### Behavior Properties

<Properties>
  <Property name="windowIndex" type="number">
    Index of the window in the BetterForms window stack. Used for multi-window
    applications to access the correct model state. Default is 0.
  </Property>
</Properties>

---

## Button Variants

The Alert Dialog component uses action buttons with the same variant system as the [Button component](/fmbf-components/button). Each button in the `actionButtons` array supports all the same variants and properties as the Button component.

For detailed information about available button variants, styling, and best practices, see the [Button Variants Guide](/fmbf-components/button#button-variants-guide).

---

## Usage Examples

The Alert Dialog component is configured using JSON objects. The `actionButtons` array defines the buttons displayed in the dialog, with each button supporting the same properties as the Button component.

### Basic Confirmation Dialog

<CodeGroup>
```html title="HTML Component"
<bfcomp name="AlertDialog" 
        title="Confirm Action" 
        body="Are you sure you want to proceed with this action?"
        :actionButtons="model.confirmButtons">
</bfcomp>
```

```javascript title="Model Definition"
// Define action buttons in your model
model.confirmButtons = [
  { label: 'Cancel', variant: 'outline', namedAction: 'closeDialog' },
  { label: 'Confirm', variant: 'primary', namedAction: 'confirmAction' },
]
```

```json title="JSON Configuration"
{
  "title": "Confirm Action",
  "body": "Are you sure you want to proceed with this action?",
  "actionButtons": [
    {
      "label": "Cancel",
      "variant": "outline",
      "namedAction": "closeDialog"
    },
    {
      "label": "Confirm",
      "variant": "primary",
      "namedAction": "confirmAction"
    }
  ]
}
```

</CodeGroup>

### Delete Confirmation Dialog

<CodeGroup>
```html title="HTML Component"
<bfcomp name="AlertDialog" 
        title="Delete Record?" 
        body="Are you sure you want to delete this record? This action cannot be undone."
        :actionButtons="model.deleteButtons">
</bfcomp>
```

```javascript title="Model Definition"
// Define action buttons in your model
model.deleteButtons = [
  { label: 'Cancel', variant: 'outline', namedAction: 'closeDialog' },
  {
    label: 'Delete',
    variant: 'destructive',
    icon: 'fa-trash',
    namedAction: 'deleteRecord',
  },
]
```

```json title="JSON Configuration"
{
  "title": "Delete Record?",
  "body": "Are you sure you want to delete this record? This action cannot be undone.",
  "actionButtons": [
    {
      "label": "Cancel",
      "variant": "outline",
      "namedAction": "closeDialog"
    },
    {
      "label": "Delete",
      "variant": "destructive",
      "icon": "fa-trash",
      "namedAction": "deleteRecord"
    }
  ]
}
```

</CodeGroup>

### Save Changes Dialog

<CodeGroup>
```html title="HTML Component"
<bfcomp name="AlertDialog" 
        title="Save Changes?" 
        body="You have unsaved changes. Would you like to save them before continuing?"
        :actionButtons="model.saveButtons">
</bfcomp>
```

```javascript title="Model Definition"
// Define action buttons in your model
model.saveButtons = [
  { label: 'Cancel', variant: 'outline', namedAction: 'closeDialog' },
  {
    label: 'Save Changes',
    variant: 'primary',
    icon: 'fa-floppy-disk',
    namedAction: 'saveChanges',
    loadingKey: 'isSaving',
  },
]
```

```json title="JSON Configuration"
{
  "title": "Save Changes?",
  "body": "You have unsaved changes. Would you like to save them before continuing?",
  "actionButtons": [
    {
      "label": "Cancel",
      "variant": "outline",
      "namedAction": "closeDialog"
    },
    {
      "label": "Save Changes",
      "variant": "primary",
      "icon": "fa-floppy-disk",
      "namedAction": "saveChanges",
      "loadingKey": "isSaving"
    }
  ]
}
```

</CodeGroup>

### Approval Workflow Dialog

<CodeGroup>
```html title="HTML Component"
<bfcomp name="AlertDialog" 
        title="Approve Request" 
        body="Review and approve this request. You can also reject it or save it for later review."
        :actionButtons="model.approvalButtons">
</bfcomp>
```

```javascript title="Model Definition"
// Define action buttons in your model
model.approvalButtons = [
  {
    label: 'Reject',
    variant: 'destructive',
    icon: 'fa-xmark',
    namedAction: 'rejectRequest',
  },
  {
    label: 'Review Later',
    variant: 'outline',
    namedAction: 'saveForLater',
  },
  {
    label: 'Approve',
    variant: 'success',
    icon: 'fa-check',
    namedAction: 'approveRequest',
    loadingKey: 'isApproving',
  },
]
```

```json title="JSON Configuration"
{
  "title": "Approve Request",
  "body": "Review and approve this request. You can also reject it or save it for later review.",
  "actionButtons": [
    {
      "label": "Reject",
      "variant": "destructive",
      "icon": "fa-xmark",
      "namedAction": "rejectRequest"
    },
    {
      "label": "Review Later",
      "variant": "outline",
      "namedAction": "saveForLater"
    },
    {
      "label": "Approve",
      "variant": "success",
      "icon": "fa-check",
      "namedAction": "approveRequest",
      "loadingKey": "isApproving"
    }
  ]
}
```

</CodeGroup>

### Unsaved Changes Warning

<CodeGroup>
```html title="HTML Component"
<bfcomp name="AlertDialog" 
        title="Unsaved Changes" 
        body="You have unsaved changes that will be lost if you leave this page. What would you like to do?"
        :actionButtons="model.unsavedButtons">
</bfcomp>
```

```javascript title="Model Definition"
// Define action buttons in your model
model.unsavedButtons = [
  {
    label: 'Keep Editing',
    variant: 'outline',
    namedAction: 'closeDialog',
  },
  {
    label: 'Discard Changes',
    variant: 'destructive',
    namedAction: 'discardChanges',
  },
  {
    label: 'Save & Continue',
    variant: 'primary',
    icon: 'fa-floppy-disk',
    namedAction: 'saveAndContinue',
    loadingKey: 'isSaving',
  },
]
```

```json title="JSON Configuration"
{
  "title": "Unsaved Changes",
  "body": "You have unsaved changes that will be lost if you leave this page. What would you like to do?",
  "actionButtons": [
    {
      "label": "Keep Editing",
      "variant": "outline",
      "namedAction": "closeDialog"
    },
    {
      "label": "Discard Changes",
      "variant": "destructive",
      "namedAction": "discardChanges"
    },
    {
      "label": "Save & Continue",
      "variant": "primary",
      "icon": "fa-floppy-disk",
      "namedAction": "saveAndContinue",
      "loadingKey": "isSaving"
    }
  ]
}
```

</CodeGroup>

### Information Alert

<CodeGroup>
```html title="HTML Component"
<bfcomp name="AlertDialog" 
        title="Important Notice" 
        body="Your subscription will expire in 7 days. Please renew to continue using all features."
        :actionButtons="model.noticeButtons">
</bfcomp>
```

```javascript title="Model Definition"
// Define action buttons in your model
model.noticeButtons = [
  {
    label: 'Remind Me Later',
    variant: 'ghost',
    namedAction: 'closeDialog',
  },
  {
    label: 'Renew Subscription',
    variant: 'primary',
    icon: 'fa-credit-card',
    namedAction: 'renewSubscription',
  },
]
```

```json title="JSON Configuration"
{
  "title": "Important Notice",
  "body": "Your subscription will expire in 7 days. Please renew to continue using all features.",
  "actionButtons": [
    {
      "label": "Remind Me Later",
      "variant": "ghost",
      "namedAction": "closeDialog"
    },
    {
      "label": "Renew Subscription",
      "variant": "primary",
      "icon": "fa-credit-card",
      "namedAction": "renewSubscription"
    }
  ]
}
```

</CodeGroup>

---

## Component Schema

The complete component schema for the Alert Dialog component. Copy and paste this code into the Component Schema section of your BetterForms app.

### Complete Schema

<CodeGroup>
```json title="Component Schema"
{
    "actionButtons": [{
        "actionOptions": {},
        "icon": "",
        "label": "Cancel",
        "loadingKey": "",
        "namedAction": "",
        "variant": "outline"
    }, {
        "actionOptions": {},
        "icon": "",
        "label": "Delete",
        "loadingKey": "",
        "namedAction": "",
        "variant": "destructive"
    }, {
        "actionOptions": {},
        "icon": "",
        "label": "Confirm",
        "loadingKey": "",
        "namedAction": "",
        "variant": "primary"
    }],
    "body": "Accusantium vel velit sed ullam exercitationem hic dolore officia. Dolores veniam harum sed illo. Velit rerum fuga magni aut. Officiis at quas velit dolore facere voluptatem et error nihil amet eveniet exercitationem. Omnis reprehenderit soluta culpa sit amet eos officiis aut et vel sit et corrupti. Error minus officia facere voluptas maxime magni.",
    "html": "<div role=\"alertdialog\" class=\"flex flex-col gap-4 bg-background border border-border p-6 rounded-lg shadow-lg sm:max-w-xl\">\n    <div class=\"flex flex-col gap-2 text-center sm:text-left\">\n        <h2 class=\"text-lg font-semibold text-foreground\">\n            {{schema.title}}\n        </h2>\n        <p class=\"text-muted-foreground text-sm\">\n            {{schema.body}}\n        </p>\n    </div>\n\n    <div class=\"flex flex-col-reverse gap-4 sm:flex-row sm:justify-end\">\n        <button v-for=\"(btn, idx) in (schema.actionButtons || [])\" :key=\"idx\" type=\"button\" @click=\"(function(){\n      var win = vueapp.$store.state.wndw.windows[schema.windowIndex];\n      var m   = win.formSchema.model;\n      var lk  = btn.loadingKey || '';           // may be empty\n      var isLoading = !!lk && !!m[lk];\n      if (isLoading) return;                    // guard\n      if (btn.namedAction) namedAction(btn.namedAction, btn.actionOptions || {});\n    })()\" :disabled=\"(function(){\n      var win = vueapp.$store.state.wndw.windows[schema.windowIndex];\n      var m   = win.formSchema.model;\n      var lk  = btn.loadingKey || '';\n      return !!(lk && m[lk]);\n    })()\" :class=\"\n      // base\n      'inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium transition-all focus:outline-none disabled:opacity-50 disabled:pointer-events-none ' +\n      // width (default to w-fit in dialogs)\n      ((btn.width==='full') ? 'w-full ' : 'w-fit ') +\n      // hover/active motion (optional)\n      'hover:scale-105 active:scale-95 ' +\n      // variant\n      (\n        btn.variant==='primary'      ? 'bg-primary text-primary-foreground hover:bg-primary-hover active:bg-primary-active' :\n        btn.variant==='secondary'    ? 'bg-secondary text-secondary-foreground hover:bg-secondary-hover active:bg-secondary-active' :\n        btn.variant==='destructive'  ? 'bg-destructive text-destructive-foreground hover:bg-destructive-hover active:bg-destructive-active' :\n        btn.variant==='success'      ? 'bg-success text-foreground hover:opacity-90 active:opacity-80' :\n        btn.variant==='warning'      ? 'bg-warning text-foreground hover:opacity-90 active:opacity-80' :\n        btn.variant==='info'         ? 'bg-info text-foreground hover:opacity-90 active:opacity-80' :\n        btn.variant==='outline'      ? 'border border-border text-foreground hover:bg-accent hover:text-accent-foreground' :\n        btn.variant==='ghost'        ? 'text-foreground hover:bg-accent hover:text-accent-foreground' :\n        btn.variant==='link'         ? 'text-primary hover:text-primary-hover active:text-primary-active underline underline-offset-4' :\n                                       'bg-foreground text-background hover:bg-foreground/90 hover:text-background'\n      )\n    \">\n            <!-- Icon / Spinner -->\n            <i v-if=\"btn.icon && !(function(){\n        var win = vueapp.$store.state.wndw.windows[schema.windowIndex];\n        var m   = win.formSchema.model;\n        var lk  = btn.loadingKey || '';\n        return !!(lk && m[lk]);\n      })()\" class=\"fa-regular\" :class=\"btn.icon\"></i>\n\n            <i v-if=\"(function(){\n        var win = vueapp.$store.state.wndw.windows[schema.windowIndex];\n        var m   = win.formSchema.model;\n        var lk  = btn.loadingKey || '';\n        return !!(lk && m[lk]);\n      })()\" class=\"fa-regular fa-spinner-third animate-spin\"></i>\n\n            {{ btn.label || 'Button' }}\n        </button>\n    </div>\n</div>",
    "title": "Sequi aliquid quasi in ut odio?",
    "windowIndex": 0
}
```

```html title="HTML Template"
<div role="alertdialog" class="flex flex-col gap-4 bg-background border border-border p-6 rounded-lg shadow-lg sm:max-w-xl">
    <div class="flex flex-col gap-2 text-center sm:text-left">
        <h2 class="text-lg font-semibold text-foreground">
            {{schema.title}}
        </h2>
        <p class="text-muted-foreground text-sm">
            {{schema.body}}
        </p>
    </div>

    <div class="flex flex-col-reverse gap-4 sm:flex-row sm:justify-end">
        <button v-for="(btn, idx) in (schema.actionButtons || [])" :key="idx" type="button" @click="(function(){
      var win = vueapp.$store.state.wndw.windows[schema.windowIndex];
      var m   = win.formSchema.model;
      var lk  = btn.loadingKey || '';           // may be empty
      var isLoading = !!lk && !!m[lk];
      if (isLoading) return;                    // guard
      if (btn.namedAction) namedAction(btn.namedAction, btn.actionOptions || {});
    })()" :disabled="(function(){
      var win = vueapp.$store.state.wndw.windows[schema.windowIndex];
      var m   = win.formSchema.model;
      var lk  = btn.loadingKey || '';
      return !!(lk && m[lk]);
    })()" :class="
      // base
      'inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium transition-all focus:outline-none disabled:opacity-50 disabled:pointer-events-none ' +
      // width (default to w-fit in dialogs)
      ((btn.width==='full') ? 'w-full ' : 'w-fit ') +
      // hover/active motion (optional)
      'hover:scale-105 active:scale-95 ' +
      // variant
      (
        btn.variant==='primary'      ? 'bg-primary text-primary-foreground hover:bg-primary-hover active:bg-primary-active' :
        btn.variant==='secondary'    ? 'bg-secondary text-secondary-foreground hover:bg-secondary-hover active:bg-secondary-active' :
        btn.variant==='destructive'  ? 'bg-destructive text-destructive-foreground hover:bg-destructive-hover active:bg-destructive-active' :
        btn.variant==='success'      ? 'bg-success text-foreground hover:opacity-90 active:opacity-80' :
        btn.variant==='warning'      ? 'bg-warning text-foreground hover:opacity-90 active:opacity-80' :
        btn.variant==='info'         ? 'bg-info text-foreground hover:opacity-90 active:opacity-80' :
        btn.variant==='outline'      ? 'border border-border text-foreground hover:bg-accent hover:text-accent-foreground' :
        btn.variant==='ghost'        ? 'text-foreground hover:bg-accent hover:text-accent-foreground' :
        btn.variant==='link'         ? 'text-primary hover:text-primary-hover active:text-primary-active underline underline-offset-4' :
                                       'bg-foreground text-background hover:bg-foreground/90 hover:text-background'
      )
    ">
            <!-- Icon / Spinner -->
            <i v-if="btn.icon && !(function(){
        var win = vueapp.$store.state.wndw.windows[schema.windowIndex];
        var m   = win.formSchema.model;
        var lk  = btn.loadingKey || '';
        return !!(lk && m[lk]);
      })()" class="fa-regular" :class="btn.icon"></i>

            <i v-if="(function(){
        var win = vueapp.$store.state.wndw.windows[schema.windowIndex];
        var m   = win.formSchema.model;
        var lk  = btn.loadingKey || '';
        return !!(lk && m[lk]);
      })()" class="fa-regular fa-spinner-third animate-spin"></i>

            {{ btn.label || 'Button' }}
        </button>
    </div>
</div>
```
</CodeGroup>

### How to Add This Component to Your BetterForms App

1. **Navigate to Components**: In your BetterForms site environment, click the **Components** tab in the left sidebar.

2. **Create New Component**: If the Alert Dialog component is not already in your components list, click the **+New** button at the top left.

3. **Open Component Schema**: In the new component, click the **`</> Component Schema`** button to access the schema editor.

4. **Replace Schema Code**: Copy the complete schema from the **Component Schema** tab above and replace all the existing code in the Component Schema section.

5. **Open HTML Tab**: Click the **HTML** tab (located directly next to the Component Schema tab) to access the HTML editor.

6. **Replace HTML Code**: Copy the HTML template from the **HTML Template** tab above and replace all the existing code in the HTML section.

   **Note**: This step might feel redundant since the HTML is included as a key/value in the component schema. However, this is sometimes a quirk in BetterForms, where the HTML doesn't render properly until you manually insert the HTML in the HTML tab on the new component.

7. **Save Component**: Click the **Save** button in the top right to save the component for use in your application.

8. **Refresh Pages**: **Important**: The component will not be available for use in any live pages you are currently viewing until you manually refresh the page using your browser's Refresh button. However, the component will be immediately available in the **Page Builder** section of every page after you save and navigate away from the Components section.

### Schema Properties Reference

- **`title`**: Dialog heading text
- **`body`**: Main content/message text
- **`actionButtons`**: Array of button objects with `label`, `variant`, `icon`, `namedAction`, `actionOptions`, `loadingKey`, and `width` properties
- **`windowIndex`**: Window index for multi-window applications (default: 0)

---

## Alert Dialog Styling

The Alert Dialog component features a clean, modal design with smooth animations and clear visual hierarchy. The styling provides excellent readability and maintains a focused interface for important user decisions.

### Visual Structure

The alert dialog renders with the following structure:

- **Container**: Modal dialog with max-width, rounded corners, shadow, padding, and border
- **Title**: Large, semi-bold heading text
- **Body**: Smaller, muted text providing context and details
- **Action Buttons**: Flex container with buttons (reverse column on mobile, row on desktop)

### Default Appearance

```html
<!-- Alert Dialog Structure -->
<div
  role="alertdialog"
  class="bg-background border-border flex flex-col gap-4 rounded-lg border p-6 shadow-lg sm:max-w-xl"
>
  <!-- Header -->
  <div class="flex flex-col gap-2 text-center sm:text-left">
    <h2 class="text-foreground text-lg font-semibold">Dialog Title</h2>
    <p class="text-muted-foreground text-sm">
      Dialog body content with important information.
    </p>
  </div>

  <!-- Action Buttons -->
  <div class="flex flex-col-reverse gap-4 sm:flex-row sm:justify-end">
    <button
      class="inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium"
    >
      Cancel
    </button>
    <button
      class="inline-flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium"
    >
      Confirm
    </button>
  </div>
</div>
```

### Responsive Layout

The dialog adapts to different screen sizes:

**Mobile (< sm breakpoint)**:

- Buttons stack vertically in reverse order (primary button on top)
- Text centered for better mobile UX
- Full-width buttons

**Desktop (≥ sm breakpoint)**:

- Buttons display in a row, right-aligned
- Text left-aligned
- Buttons fit content width
- Max-width constraint (sm:max-w-xl = 576px)

### Button Styling

Buttons within the dialog use the same variant classes as the Button component:

```html
<!-- Primary Button -->
<button class="bg-primary text-primary-foreground hover:bg-primary-hover">
  Confirm
</button>

<!-- Destructive Button -->
<button
  class="bg-destructive text-destructive-foreground hover:bg-destructive-hover"
>
  Delete
</button>

<!-- Outline Button -->
<button class="border-border text-foreground hover:bg-accent border">
  Cancel
</button>
```

### Loading State

When a button has a `loadingKey` and the model value is truthy:

```html
<!-- Button shows spinner and is disabled -->
<button disabled class="pointer-events-none opacity-50">
  <i class="fa-regular fa-spinner-third animate-spin"></i>
  Saving...
</button>
```

### Accessibility Features

The component includes full accessibility support:

- **`role="alertdialog"`** - Identifies the dialog as an alert requiring user response
- **Semantic HTML** - Proper heading hierarchy and button elements
- **Keyboard navigation** - Tab through buttons, Enter/Space to activate
- **Focus management** - Automatic focus handling for dialog interactions

### Theme Integration

The component uses CSS custom properties for colors:

- `bg-background`, `text-foreground` - Base background and text colors
- `border-border` - Border color
- `text-muted-foreground` - Secondary text color for body content
- `shadow-lg` - Large shadow for modal elevation

---

## Button Loading States

Alert Dialog buttons support loading states through the `loadingKey` property, providing visual feedback during async operations.

### How Loading Works

When a button specifies a `loadingKey`, it monitors that path in the form model:

1. **Model Check**: Button checks `model[loadingKey]` for a truthy value
2. **Icon Swap**: Regular icon is hidden, spinning loader appears
3. **Disabled State**: Button becomes disabled automatically
4. **Visual Feedback**: Loading spinner rotates continuously

### Loading State Example

```javascript
// In your model
model.isSaving = false

// In your named action
async function saveChanges() {
  model.isSaving = true

  try {
    await saveDataToServer()
  } finally {
    model.isSaving = false
  }
}
```

### Button Configuration with Loading

```json
{
  "label": "Save Changes",
  "variant": "primary",
  "icon": "fa-floppy-disk",
  "namedAction": "saveChanges",
  "loadingKey": "isSaving"
}
```

### Best Practices

**✅ Do:**

- Use unique loading keys for each async operation
- Always clear the loading state in a `finally` block
- Disable other actions while one is loading
- Provide clear button labels indicating the action

**❌ Don't:**

- Reuse the same loading key for multiple buttons
- Forget to reset the loading state after operation completes
- Use loading states for instant/synchronous operations
- Allow multiple concurrent actions without proper state management
